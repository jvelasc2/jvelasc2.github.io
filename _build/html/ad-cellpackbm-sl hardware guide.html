<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AD-CELLPACKBM-SL Hardware User Guide &#8212; Wiki Page Migration Trial 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="_static/style.min.css?v=95305861" />
    <script src="_static/documentation_options.js?v=8d563738"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="" src="_static/app.umd.js?v=c93eadd1"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  
  <meta name="global_root" content="./../">
  <meta name="repo" content="">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="index.html">
          <div>Wiki Page Migration Trial</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="./..\documentation\index.html">System Level</a>
  <a href="./..\hdl\index.html">HDL</a>
  <a href="./..\testbenches\index.html">HDL Testbenches</a>
  <a href="./..\pyadi-iio\index.html">Hardware Python Interfaces</a>
  <a href="./..\libiio\index.html">libiio</a>
  <a href="./..\no-OS\index.html">no-OS</a>
  <a href="./..\precision-converters-firmware\index.html">Precision Converters Firmware</a>
  <a href="./..\PrecisionToolbox\index.html">Precision Toolbox</a>
  <a href="./..\scopy\index.html">Scopy</a>
  <a href="./..\doctools\index.html">Doctools</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">AD-CELLPACKBM-SL Hardware User Guide</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#system-setup">System Setup</a></li>
<li><a class="reference internal" href="#equipment-needed">Equipment Needed</a></li>
<li><a class="reference internal" href="#software">Software</a></li>
<li><a class="reference internal" href="#mcu-configuration-setup">MCU Configuration &amp; Setup</a></li>
<li><a class="reference internal" href="#bms-browser-gui-installation">BMS Browser GUI Installation</a></li>
<li><a class="reference internal" href="#battery-cell-monitoring">Battery Cell Monitoring</a></li>
<li><a class="reference internal" href="#battery-pack-monitoring">Battery Pack Monitoring</a></li>
<li><a class="reference internal" href="#complete-daisy-chain">Complete Daisy Chain</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="index.html">
      Wiki Page Migration Trial
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="./..\documentation\index.html">System Level</a>
  <a href="./..\hdl\index.html">HDL</a>
  <a href="./..\testbenches\index.html">HDL Testbenches</a>
  <a href="./..\pyadi-iio\index.html">Hardware Python Interfaces</a>
  <a href="./..\libiio\index.html">libiio</a>
  <a href="./..\no-OS\index.html">no-OS</a>
  <a href="./..\precision-converters-firmware\index.html">Precision Converters Firmware</a>
  <a href="./..\PrecisionToolbox\index.html">Precision Toolbox</a>
  <a href="./..\scopy\index.html">Scopy</a>
  <a href="./..\doctools\index.html">Doctools</a>
</root>

</div>
<div class="toc-tree">
  
</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="ad-cellpackbm-sl-hardware-user-guide">
<h1>AD-CELLPACKBM-SL Hardware User Guide<a class="headerlink" href="#ad-cellpackbm-sl-hardware-user-guide" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>The AD-CELLPACKBM-SL is a complete BMS kit consisting of the EVAL-ADBMS6830BMSW 16-channel cell monitoring module, the EVAL-ADBMS2950-BASIC pack monitoring module, EVAL-ADBMS6822 isoSPI adapter, and the SDP-K1 microcontroller board.</p>
<p>This solution is based on high-performance BMS devices that are specifically designed for broad market applications and is suitable for determining the battery’s state of charge (SoC) and state of health (SoH), as well as performing important BMS diagnostics.</p>
<p>The AD-CELLPACKBM-SL can operate either in embedded mode or through a PC-based graphical user interface. Complete with working software and hardware, as well as software examples, this kit makes it easier for customers to prototype and create connected systems and solutions for BMS applications.</p>
</section>
<section id="system-setup">
<h2>System Setup<a class="headerlink" href="#system-setup" title="Link to this heading">#</a></h2>
<p>This section describes the procedure for establishing hardware connection between the boards, how to download the system requirements such as the firmware and software, and eventually obtain and view BMS readings through the Broad Market BMS graphical user interface.</p>
</section>
<section id="equipment-needed">
<h2>Equipment Needed<a class="headerlink" href="#equipment-needed" title="Link to this heading">#</a></h2>
<p>For easy identification of the components included in the kit, refer to the figure below.</p>
<p><strong>Boards</strong></p>
<ul class="simple">
<li><p>2x EVAL-ADBMS6830BMSW 16-Channel Battery Cell Monitor</p></li>
<li><p>1x EVAL-ADBMS2950-BASIC Battery Pack Monitor</p></li>
<li><p>1x EVAL-ADBMS6822 Dual isoSPI Adapter</p></li>
<li><p>1x EVAL-SDP-CK1Z (SDP-K1) Controller Board</p></li>
<li><p>2x DC2472A Battery Cell Emulator</p></li>
<li><p>1x MAX32625PICO Programming Adapter with 10-pin SWD cable (loaded with firmware image)</p></li>
</ul>
<p><strong>Cables and Other Accessories</strong></p>
<ul class="simple">
<li><p>2x Cell Connector Block (18-cell connector)</p></li>
<li><p>3x DuraClik isoSPI Twisted Pair Cables</p></li>
<li><p>3x USB Type A to Micro-B Cable</p></li>
<li><p>2x 12.0“ Alligator Clip / Test Lead, Black</p></li>
<li><p>1x 12.0” Alligator Clip / Test Lead, Red</p></li>
<li><p>1x 24.0“ Alligator Clip / Test Lead, Red</p></li>
</ul>
<p>The following list of equipment are not provided as part of the kit, but are required for running the setup described in this guide.</p>
<ul class="simple">
<li><p>Laptop or PC running Windows 10</p></li>
<li><p>Digital power supply (such as the Keysight e3631A 0V to 6V power supply)</p></li>
<li><p>2x wall plugs (to plug USB cable from DC2472A to provide power)</p></li>
</ul>
</section>
<section id="software">
<h2>Software<a class="headerlink" href="#software" title="Link to this heading">#</a></h2>
<p>The BMS Browser is a PC browser based Graphical User Interface (GUI) tool designed to work in conjunction with the hardware in the AD-CELLPACKBM-SL. MyAnalog.com account will be required to download the BMS Browser GUI from below link:</p>
<p><a class="reference external" href="https://www.analog.com/en/resources/evaluation-hardware-and-software/software/software-download.html?swpart=SD_ELPTRFU">BMS Broad Market GUI</a></p>
<p>When software updates or new versions of the software are available an email notification will be sent to the email address associated with the MyAnalog account used to download the original software package.</p>
</section>
<section id="mcu-configuration-setup">
<h2>MCU Configuration &amp; Setup<a class="headerlink" href="#mcu-configuration-setup" title="Link to this heading">#</a></h2>
<p>By default (upon purchase), the AD-CELLPACKBM-SL Kit comes with a MAX32625PICO programmer adapter that is already loaded with the appropriate firmware image.</p>
<p>Otherwise, if you are using a new MAX32625PICO programmer (that is not part of the original kit), make sure to flash it first with the correct firmware image before using it with the AD-CELLPACKBM-SL BMS Kit. If you do not know how to load the image, follow the instructions below.</p>
<p>The MCU should be programmed using the following steps:</p>
<p>MAX326825PICO Debugger (One time setup)</p>
<ol class="arabic simple">
<li><p>Download and install the BMS Browser GUI Broadmarket.</p></li>
<li><dl class="simple">
<dt>Open the program files folder of the BMS Browser GUI in the host PC and look for the SDP-K1 .bin file.</dt><dd><p><code class="docutils literal notranslate"><span class="pre">C:\Analog</span> <span class="pre">Devices\BMS_Browser_GUI_Broadmarket-Rel2.0.0\USB_TO_SPI_Firmware</span></code></p>
</dd>
</dl>
</li>
<li><p>Plug the micro-USB cable to the MAX32625PICO.</p></li>
<li><p>Press the button on the MAX32625PICO and then plug the other end of the micro-USB cable into the PC. A red LED should blink, then hold steady, and a MAINTENANCE drive should appear on your PC.</p></li>
<li><p>Drag and drop the <code class="docutils literal notranslate"><span class="pre">SDP_K1_PyBMS_USB_TO_SPI_Bytes_Debug_USB_Port.bin</span></code> file onto the MAINTENANCE drive. The file transfer should be complete in about 30 seconds.</p></li>
<li><p>Unplug and replug the device.</p></li>
<li><p>After completing this step, a “DAPLINK” drive should appear. You can drag and drop the firmware (.bin files separate from the above) onto it to program the SDP-K1.</p></li>
</ol>
<p>Consult the MSDK User Guide for detailed instructions on updating the MAX32625PICO Debug Adapter Firmware.</p>
</section>
<section id="bms-browser-gui-installation">
<h2>BMS Browser GUI Installation<a class="headerlink" href="#bms-browser-gui-installation" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Download the BMS Browser GUI in your Host PC.</p></li>
<li><p>Double click on <code class="docutils literal notranslate"><span class="pre">bms_browser_gui_broadmarket-relX.Y.Z.exe</span></code> to install the GUI.</p></li>
<li><p>Accept the license terms and click Next to proceed with the installation. The default installation directory will be in <code class="docutils literal notranslate"><span class="pre">C:\Analog</span> <span class="pre">Devices\</span></code>.</p></li>
</ol>
<p>Launching the BMS Browser GUI</p>
<ol class="arabic simple">
<li><p>Open the BMS Browser GUI either by searching for it in the Start Menu or using the shortcut on the Desktop.</p></li>
<li><p>Run the application to launch the BMS Browser GUI.</p></li>
<li><p>Upon launching, a console window will appear to display background information.</p></li>
<li><p>Two new tabs will open in the default browser on the PC, with the User Guide tab as the default.</p></li>
<li><p>Switch to the alternative tab to access the BMS Browser configuration page, which should be displayed.</p></li>
<li><p>Ensure that the SDP-K1 is connected to the PC via the USB-C cable on P10. The Blue LED, D31 will illuminate when powered.</p></li>
<li><p>In the Serial Port dropdown box, select the COM port associated with SDP-K1.</p></li>
</ol>
</section>
<section id="battery-cell-monitoring">
<h2>Battery Cell Monitoring<a class="headerlink" href="#battery-cell-monitoring" title="Link to this heading">#</a></h2>
<p><strong>Setup</strong></p>
<p>This setup uses the SDP-K1 as the controller board, but users may also use the AD-APARD32690-SL as MCU and follow the same hardware setup instructions.</p>
<p>The DC2472A Battery Emulator Board was also used for cell voltage input. Alternatively, resistors can be used to simulate battery cell voltages. 100 Ω ½ W or equivalent resistors are recommended because 100 Ω (or lower values) typically will not induce measurement errors, and the ½ W (or greater rating) will keep the resistor temperatures low, preventing power dissipation damage.</p>
<p>Check the EVAL-ADBMS6830BMSW User Guide for procedure on connecting resistors.</p>
<ol class="arabic simple">
<li><p>Connect the EVAL-ADBMS6822 dual isoSPI adapter to the EVAL-SDP-CK1Z (SDP-K1) controller board through the Arduino headers.</p></li>
<li><p>Set the P14 jumper of the SDP-K1 to the 3.3 V position.</p></li>
<li><p>Connect the SDP-K1 (P2) to the Host PC using a USB cable.</p></li>
<li><p>Connect the EVAL-ADBMS6822 (J1) to the EVAL-ADBMS6830BMSW (J3) using the 2-wire twisted-pair patch cable from the main DuraClik connector to isoSPI A DuraClik connector.</p></li>
<li><p>Plug the screw-terminal block(s) into the cell voltage connectors of the DC2472A battery emulator board. Note that the last three terminals of the DC2472A must be left hanging.</p></li>
<li><p>Connect the DC2472A battery emulator board to the EVAL-ADBMS6830BMSW through the connected cell voltage connectors (J1).</p></li>
<li><p>Power the DC2472A using a 5 V external source connected to J1 using a USB cable. Alternatively, power it through PC using a USB cable to be connected via J10.</p></li>
<li><p>While some laptop USB ports may suffice for powering the emulator during evaluation, it is still recommended to use an external power supply to ensure adequate power. Note that the EVAL-ADBMS6830BMSW is powered through the DC2472A.</p></li>
<li><p>Attach the MAX32625PICO programmer to the SDP-K1 using the 10-pin ribbon SWD cable. Observe correct polarity when connecting the SWD cable.</p></li>
</ol>
<p><strong>Test</strong></p>
<ol class="arabic simple">
<li><p>Open the BMS Browser GUI.</p></li>
<li><p>Go to the Interface Connection section and select the COM port associated with the SDP-K1.</p></li>
<li><p>Under the Daisy Chain section, ensure the Generation drop-down box is set to ADBMSGEN6.</p></li>
<li><p>From the Products list, select the ADBMS6830, then click on the right arrow to add it to the Daisy Chain. Settings can remain as default.</p></li>
<li><p>Click Launch.</p></li>
<li><p>Upon launching, the Quick Measure tab will open. Note: this utility only supports a single BMS product in a Daisy Chain. Click Start Quick Measure to begin measurements.</p></li>
<li><p>Check the Total PEC Status on the 3rd row under the Memory Map. This indicates the status of the isoSPI link between the EVAL-ADBMS6822 and the EVAL-ADBMS6830BMSW.</p></li>
<li><p>Ensure the EVAL-ADBMS6830BMSW board is powered correctly, indicated by the Blue LED on the DC2472A being illuminated.</p></li>
<li><p>Verify the connection of the twisted cable between the EVAL-ADBMS6822 and the EVAL-ADBMS6830BMSW.</p></li>
<li><p>Check the voltage readings by adjusting the potentiometer (POT1) on the DC2472A to modify the emulated cell voltages. Monitor the voltage channels on the Quick Measure Utility graph. Select which signals to display on the graph under the Plot All Devices column.</p></li>
</ol>
</section>
<section id="battery-pack-monitoring">
<h2>Battery Pack Monitoring<a class="headerlink" href="#battery-pack-monitoring" title="Link to this heading">#</a></h2>
<p><strong>Setup</strong></p>
<ol class="arabic simple">
<li><p>Connect the EVAL-ADBMS6822 dual isoSPI adapter to the EVAL-SDP-CK1Z (SDP-K1) controller board through the Arduino headers.</p></li>
<li><p>Set the P14 jumper of the SDP-K1 to the 3.3 V position.</p></li>
<li><p>Connect the EVAL-ADBMS6822 (J1) to the EVAL-ADBMS2950-BASIC (isoA) using the provided isoSPI cable.</p></li>
<li><dl class="simple">
<dt>Choose between two options for powering the EVAL-ADBMS2950-BASIC:</dt><dd><ul class="simple">
<li><p>Supply 5 V to J1 and set the current limit to 200 mA. The EVAL-ADBMS2950-BASIC consumes less than 50 mA in idle mode and ~100 mA in active mode. The image below depicts the current measurement in idle mode.</p></li>
<li><p>Alternatively, power it using a micro-USB cable connected to J10.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Attach the MAX32625PICO programmer to the SDP-K1 using the 10-pin ribbon SWD cable. Observe correct polarity when connecting the SWD cable.</p></li>
<li><p>Connect one end of the USB cable to SDP-K1 (P2) and the other end to the host PC.</p></li>
</ol>
<p><strong>Test</strong></p>
<ol class="arabic simple">
<li><p>Open the BMS Browser GUI.</p></li>
<li><p>Go to the Interface Connection section and select the COM port associated with the SDP-K1.</p></li>
<li><p>Under the Daisy Chain section, ensure the Generation drop-down box is set to ADBMSGEN6.</p></li>
<li><p>From the Products list, select the ADBMS2950, then click on the right arrow to add it to the Daisy Chain. Settings can remain as default.</p></li>
<li><p>Click Launch.</p></li>
<li><p>Upon launching, the Quick Measure tab will open. Note: it can only handle one BMS product in a Daisy Chain. Click Start Quick Measure to begin measurements.</p></li>
<li><p>Check the Total PEC Status on the Memory Map. It should reflect true, indicating a successful isoSPI link between the EVAL-ADBMS6822 and the EVAL-ADBMS2950-BASIC. If false, there is an error in the signal chain.</p></li>
</ol>
</section>
<section id="complete-daisy-chain">
<h2>Complete Daisy Chain<a class="headerlink" href="#complete-daisy-chain" title="Link to this heading">#</a></h2>
<p><strong>Setup</strong></p>
<p>Once familiar with the setup for each of the individual boards the entire signal chain can be verified.</p>
<ol class="arabic simple">
<li><p>Connect the hardware using the DuraClik isoSPI cables, as shown in the diagram below.</p></li>
<li><p>Power each DC2472A cell emulator board using a 5 V external source connected to J1 through the USB cable.</p></li>
<li><p>Power the EVAL-ADBMS2950-BASIC either through J1 or J10, as explained earlier.</p></li>
<li><p>Using the black alligator clip cable, connect the V- pin of the second EVAL-ABMS6830BMSW to the BATT- port of the EVAL-ADBMS2950-BASIC.</p></li>
<li><p>Using the red alligator clip cable, connect the V- pin of the first EVAL-ABMS6830BMSW board to the V+ pin of the second EVAL-ADBMS6830BMSW.</p></li>
<li><p>Attach the MAX32625PICO programmer to the SDP-K1 using the 10-pin ribbon SWD cable. Observe correct polarity when connecting the SWD cable.</p></li>
<li><p>Connect one end of the USB cable to SDP-K1 (P2) and the other end to the host PC.</p></li>
</ol>
<p><strong>Test</strong></p>
<ol class="arabic simple">
<li><p>Launch the BMS Browser following the previous instructions and choose the appropriate COM port.</p></li>
<li><p>Set up the Daisy Chain according to the diagram provided. The EVAL-ADBMS2950-BASIC is positioned at the top, indicating it is the initial device on the chain, connected to the EVAL-ADBMS6822. The first EVAL-ADBMS6830BMSW connects to the EVAL-ADBMS2950-BASIC, while the second EVAL-ADBMS6830BMSW is linked to the first one via the isoSPI cable.</p></li>
<li><p>Click on Launch to initiate the GUI. After the GUI launches in the Browser, go to the Sequences tab located in the top toolbar, which will open the Sequence Configuration page.</p></li>
<li><p>In the Files column, select the ADBMS6830-ADBMS2950.json. This action will load a preconfigured sequence into the tool.</p></li>
<li><p>Click on Initialization Sequence followed by General Initialization under the Sequences column to load the defined sequences from the ADBMS6830-ADBMS2950.json file into the tool.</p></li>
<li><p>Next, select Loop Sequence and then click on General Readback Loop under the Sequences column. This action loads the loop sequence defined in the ADBMS6830-ADBMS2950.json file into the tool.</p></li>
<li><p>Finally, click on Start Freerun to initiate the freerun mode.</p></li>
<li><p>During free run mode, the Initialization Sequence is performed once initially. Subsequently, the loop sequence continues to run continuously until the Stop Freerun button is clicked.</p></li>
<li><p>After activating freerun mode, navigate to the Memory Map tab. This section displays a numerical representation of the ongoing command loop. Additional details can be accessed in the GUI’s help section. The accompanying screenshot illustrates this output.</p></li>
<li><p>The Plots tab allows for the visualization of parameters recorded during the command loop. It supports the creation of up to four plots simultaneously.</p></li>
</ol>
<p>In the configured Daisy Chain, the EVAL-ADBMS2950-BASIC is designated as Device 1, the first EVAL-ADBMS6830BMSW as Device 2, and the third EVAL-ADBMS6830BMSW as Device 3. An example illustrates how to plot each parameter separately: I1ACC and I2ACC on Plot 1, the average cell voltages for the first EVAL-ADBMS6830MSW on Plot 2, and the averaged cell voltages for the third EVAL-ADBMS6830BMSW on Plot 3.</p>
<p>Simply choose the desired Plot number from the dropdown menu under each device to display the relevant data.</p>
<p>Plot settings can be saved to the PC to be reloaded for future session to save time.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <div></div>
    <div></div>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Joyce Velasco
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>